{% macro linkify(href, title, blank=true) %}
  <a href="{{ href }}" title="View {{ title }}
    {%- if blank %} (opens in new window){% endif -%}"
    {%- if blank %} target="_blank" rel="noopener"{% endif %}>
    {{- caller() -}}
  </a>
{% endmacro %}

<ul class="projects">
{% for project in projects -%}
  <li>
    <figure>
      {%- call linkify(project.url, project.heading, false) -%}
        <img src="/img/{{ project.img }}">
      {%- endcall -%}
      <figcaption>
        <p>
          {%- call linkify(project.url, project.heading) -%}
            {{- project.heading -}}
          {%- endcall %} {{ project.copy -}}
        </p>
      </figcaption>
    </figure>
  </li>
{%- endfor %}
</ul>